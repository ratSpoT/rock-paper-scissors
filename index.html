<!DOCTYPE html>
<html lang=”en”>
<head>
  <meta charset=”UTF-8”>
  <title>Rock-Paper-Scissors</title>
</head>
<body>
  <h1>Rock-Paper-Scissors</h1>
  <p>Choose one option</p>
  <button class="rock">Rock</button>
  <button class="paper">Paper</button>
  <button class="scissors">Scissors</button>
  <div class="results"></div>
  
  <script>
    let humanScore = 0;
    let computerScore = 0;
    
    const humanScoreShown = document.createElement("p");
    const computerScoreShown = document.createElement("p");
    const outcomeShown = document.createElement("p");

    humanScoreShown.textContent = "Your score: 0";
    computerScoreShown.textContent = "Computer score: 0";
    
    const resultsDiv = document.querySelector("div.results");
    resultsDiv.appendChild(outcomeShown);
    resultsDiv.appendChild(humanScoreShown);
    resultsDiv.appendChild(computerScoreShown);
    
    const btns = document.querySelectorAll("button");
    
    btns.forEach((button) => {
      button.addEventListener("click", (e) => {
        let outcome = playRound(e.target.getAttribute("class"));
        
        if (outcome === "win") {
          humanScore++;
          outcomeShown.textContent = "You win!";
        } else if (outcome === "lost") {
          computerScore++;
          outcomeShown.textContent = "You lost!";
        } else {
          outcomeShown.textContent = "Tied!";
        }

        humanScoreShown.textContent = "Your score: " + String(humanScore);
        computerScoreShown.textContent = "Computer score: " + String(computerScore);
        
        if (humanScore === 5 || computerScore === 5) {
          if (humanScore > computerScore) {
            outcomeShown.textContent = `Game over. You won! You won ${humanScore} rounds while computer won ${computerScore} rounds`;
          } else if (computerScore > humanScore) {
            outcomeShown.textContent = `Game over. You lost! You won ${humanScore} rounds while computer won ${computerScore} rounds`;
          }
          
          // reset the game
          humanScore = 0;
          computerScore = 0;
        }
      });
    });
    
    function getComputerChoice() {
      let randInt = Math.floor(Math.random() * 10);

      // ensure equal probability of each option
      while (randInt === 0) {
          randInt = Math.floor(Math.random() * 10);
      }
      
      randInt = randInt % 3;
      
      if (randInt === 0) {
        return "rock";
      } else if (randInt === 1) {
        return "paper";
      } else {
        return "scissors";
      }
    }
      
    function playRound(humanChoice) {
      humanChoice = humanChoice.toLowerCase();
      const computerChoice = getComputerChoice();
      
      if (humanChoice === computerChoice) {
        return "tie";
      }
      
      else if (humanChoice === 'rock') {
        if (computerChoice === 'scissors') {
          return "win";
        } else {
          return "lost";
        }
      }

      else if (humanChoice === 'paper') {
        if (computerChoice === 'rock') {
          return "win";
        } else {
          return "lost";
        }
      }

      else if (humanChoice === 'scissors') {
        if (computerChoice === 'paper') {
          return "win";
        } else {
          return "lost";
        }
      }
    }
  </script>
</body>
